<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Поиск товара и альтернатив</title>
<style>
body { font-family: Arial, sans-serif; padding:30px; }
input[type=text] { width: 70%; font-size:16px; padding:8px; }
button { padding:10px 18px; }
.product, .alt { margin:16px 0; padding:8px; border:1px solid #eee; border-radius:5px; }
.alt { background:#f6f6fe;}
</style>
</head>
<body>
<h2>Поиск товара</h2>
<input type="text" id="productQuery" placeholder="Введите название товара...">
<button onclick="searchProduct()">Найти</button>
<div id="results"></div>

<script>
async function searchProduct() {
  const q = document.getElementById('productQuery').value.trim();
  if (!q) return;
  const res = await fetch(`http://localhost:3000/api/search?query=${encodeURIComponent(q)}`);
  const data = await res.json();
  const box = document.getElementById('results');
  box.innerHTML = '';
  if (!data) {
    box.innerHTML = '<p>Товар не найден</p>';
    return;
  }
  box.innerHTML = `<div class="product"><b>Основной товар: </b>${data.ourProduct}</div>`;
  if (data.alternatives.length > 0) {
    box.innerHTML += '<div><b>Альтернативы:</b></div>';
    data.alternatives.forEach(a =>
      box.innerHTML += `<div class="alt">${a}</div>`
    );
  } else {
    box.innerHTML += '<div>Альтернативы не найдены</div>';
  }
}
</script>
</body>
</html>
